<!DOCTYPE html>
<html lang="ur" dir="ltr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìö Book Notes - Self Help Notes App</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <style>
        * {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            min-height: 100vh;
        }
    </style>
</head>

<body class="bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-800 min-h-screen">
    <div id="app" class="container mx-auto px-4 py-6 max-w-4xl"> <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold text-white mb-2">üìö Book Notes</h1>
            <p class="text-purple-200 text-lg">Apni Self-Help Books ke Notes Yahan Save Karein!</p>
        </header> <!-- Main View -->
        <div id="mainView"> <!-- Add Book Section -->
            <div class="bg-white/10 backdrop-blur-lg rounded-2xl p-6 mb-6 border border-white/20">
                <h2 class="text-xl font-bold text-white mb-4">‚ûï Nayi Book Add Karein</h2>
                <div class="flex flex-col md:flex-row gap-3"> <input type="text" id="bookName"
                        placeholder="Book ka naam likhen..."
                        class="flex-1 px-4 py-3 rounded-xl bg-white/20 text-white placeholder-purple-200 border border-white/30 focus:outline-none focus:ring-2 focus:ring-pink-400">
                    <button id="addBookBtn"
                        class="px-6 py-3 bg-gradient-to-r from-pink-500 to-orange-500 text-white font-bold rounded-xl hover:from-pink-600 hover:to-orange-600 transition-all transform hover:scale-105 active:scale-95">
                        Book Add Karein </button> </div>
            </div> <!-- Books List -->
            <div id="booksList" class="space-y-4 mb-6"></div>
        </div> <!-- Chapter View (Hidden by default) -->
        <div id="chapterView" class="hidden">
            <div class="bg-white/10 backdrop-blur-lg rounded-2xl p-6 mb-6 border border-white/20">
                <div class="flex items-center justify-between mb-4"> <button id="backToBooks"
                        class="text-white hover:text-pink-300 flex items-center gap-2"> <span class="text-2xl">‚Üê</span>
                        Wapas </button>
                    <h2 id="currentBookTitle" class="text-xl font-bold text-white"></h2>
                    <div></div>
                </div> <!-- Add Chapter -->
                <div class="flex flex-col md:flex-row gap-3 mt-4"> <input type="text" id="chapterName"
                        placeholder="Chapter ka naam..."
                        class="flex-1 px-4 py-3 rounded-xl bg-white/20 text-white placeholder-purple-200 border border-white/30 focus:outline-none focus:ring-2 focus:ring-pink-400">
                    <button id="addChapterBtn"
                        class="px-6 py-3 bg-gradient-to-r from-green-500 to-teal-500 text-white font-bold rounded-xl hover:from-green-600 hover:to-teal-600 transition-all">
                        Chapter Add </button> </div>
            </div> <!-- Chapters List -->
            <div id="chaptersList" class="space-y-3"></div>
        </div> <!-- Notes View (Hidden by default) -->
        <div id="notesView" class="hidden">
            <div class="bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20">
                <div class="flex items-center justify-between mb-4"> <button id="backToChapters"
                        class="text-white hover:text-pink-300 flex items-center gap-2"> <span class="text-2xl">‚Üê</span>
                        Chapters </button>
                    <h2 id="currentChapterTitle" class="text-xl font-bold text-white"></h2> <button id="saveNotesBtn"
                        class="px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-500 text-white font-bold rounded-xl hover:from-green-600 hover:to-emerald-600 transition-all">
                        üíæ Save </button>
                </div> <textarea id="notesArea"
                    placeholder="Is chapter ke important points yahan likhen...‚úÖ Key learnings‚úÖ Action items‚úÖ Quotes‚úÖ Apne thoughts..."
                    class="w-full h-96 px-4 py-4 rounded-xl bg-white/20 text-white placeholder-purple-200 border border-white/30 focus:outline-none focus:ring-2 focus:ring-pink-400 resize-none text-lg leading-relaxed"></textarea>
                <div class="mt-4 flex flex-wrap gap-2" id="emojiButtons"> <button data-emoji="‚úÖ"
                        class="px-3 py-2 bg-white/20 rounded-lg hover:bg-white/30 text-white">‚úÖ</button> <button
                        data-emoji="‚≠ê" class="px-3 py-2 bg-white/20 rounded-lg hover:bg-white/30 text-white">‚≠ê</button>
                    <button data-emoji="üí°"
                        class="px-3 py-2 bg-white/20 rounded-lg hover:bg-white/30 text-white">üí°</button> <button
                        data-emoji="üìå"
                        class="px-3 py-2 bg-white/20 rounded-lg hover:bg-white/30 text-white">üìå</button> <button
                        data-emoji="üéØ"
                        class="px-3 py-2 bg-white/20 rounded-lg hover:bg-white/30 text-white">üéØ</button> <button
                        data-emoji="üí™"
                        class="px-3 py-2 bg-white/20 rounded-lg hover:bg-white/30 text-white">üí™</button> <button
                        data-emoji="üî•"
                        class="px-3 py-2 bg-white/20 rounded-lg hover:bg-white/30 text-white">üî•</button> <button
                        data-emoji="üìù"
                        class="px-3 py-2 bg-white/20 rounded-lg hover:bg-white/30 text-white">üìù</button> </div>
            </div>
        </div> <!-- Toast Notification -->
        <div id="toast"
            class="fixed bottom-6 right-6 px-6 py-3 bg-green-500 text-white font-bold rounded-xl shadow-2xl transform translate-y-20 opacity-0 transition-all duration-300 z-50">
            ‚úÖ Save ho gaya! </div> <!-- Footer -->
        <footer class="text-center mt-8 text-purple-200 text-sm">
            <p>üì± Mobile friendly | üíæ Data locally save hota hai</p>
            <p class="mt-1">Made with ‚ù§Ô∏è for Self-Improvement</p>
        </footer>
    </div>
    <script>        // Data Structure        let data = {            books: []        };        let currentBookId = null;        let currentChapterId = null;        // Check if localStorage is available        function isStorageAvailable() {            try {                const test = '__storage_test__';                localStorage.setItem(test, test);                localStorage.removeItem(test);                return true;            } catch (e) {                return false;            }        }        // Load data from localStorage        function loadData() {            try {                if (isStorageAvailable()) {                    const saved = localStorage.getItem('bookNotesData');                    if (saved) {                        data = JSON.parse(saved);                    }                }            } catch (e) {                console.error('Error loading data:', e);                data = { books: [] };            }            renderBooks();        }        // Save data to localStorage        function saveData() {            try {                if (isStorageAvailable()) {                    localStorage.setItem('bookNotesData', JSON.stringify(data));                }            } catch (e) {                console.error('Error saving data:', e);                showToast('‚ùå Save nahi ho saka!');            }        }        // Add new book        function addBook() {            const input = document.getElementById('bookName');            const name = input.value.trim();                        if (!name) {                showToast('‚ùå Book ka naam likhen!');                return;            }                        const book = {                id: Date.now(),                name: name,                chapters: [],                createdAt: new Date().toISOString()            };                        data.books.unshift(book);            saveData();            renderBooks();            input.value = '';            showToast('‚úÖ Book add ho gayi!');        }        // Render books list        function renderBooks() {            const container = document.getElementById('booksList');                        if (!data.books || data.books.length === 0) {                container.innerHTML = `                    <div class="text-center py-12 text-purple-200">                        <div class="text-6xl mb-4">üìñ</div>                        <p class="text-xl">Abhi koi book nahi hai</p>                        <p>Upar se nayi book add karein!</p>                    </div>                `;                return;            }                        let html = '';            data.books.forEach(function(book) {                html += `                    <div class="bg-white/10 backdrop-blur-lg rounded-2xl p-5 border border-white/20 hover:bg-white/20 transition-all">                        <div class="flex items-center justify-between">                            <div class="flex-1 cursor-pointer" data-action="openBook" data-id="${book.id}">                                <h3 class="text-xl font-bold text-white">üìò ${escapeHtml(book.name)}</h3>                                <p class="text-purple-200 text-sm mt-1">${book.chapters ? book.chapters.length : 0} chapters</p>                            </div>                            <div class="flex gap-2">                                <button data-action="openBook" data-id="${book.id}" class="px-4 py-2 bg-blue-500/50 text-white rounded-lg hover:bg-blue-500/70">                                    Open                                </button>                                <button data-action="deleteBook" data-id="${book.id}" class="px-4 py-2 bg-red-500/50 text-white rounded-lg hover:bg-red-500/70">                                    üóëÔ∏è                                </button>                            </div>                        </div>                    </div>                `;            });            container.innerHTML = html;        }        // Escape HTML to prevent XSS        function escapeHtml(text) {            const div = document.createElement('div');            div.textContent = text;            return div.innerHTML;        }        // Open book        function openBook(bookId) {            currentBookId = bookId;            const book = data.books.find(function(b) { return b.id === bookId; });                        if (!book) {                showToast('‚ùå Book nahi mili!');                return;            }                        document.getElementById('mainView').classList.add('hidden');            document.getElementById('chapterView').classList.remove('hidden');            document.getElementById('currentBookTitle').textContent = 'üìò ' + book.name;                        renderChapters();        }        // Go back to books        function goBack() {            currentBookId = null;            document.getElementById('mainView').classList.remove('hidden');            document.getElementById('chapterView').classList.add('hidden');        }        // Add chapter        function addChapter() {            const input = document.getElementById('chapterName');            const name = input.value.trim();                        if (!name) {                showToast('‚ùå Chapter ka naam likhen!');                return;            }                        const book = data.books.find(function(b) { return b.id === currentBookId; });                        if (!book) {                showToast('‚ùå Book nahi mili!');                return;            }                        if (!book.chapters) {                book.chapters = [];            }                        const chapter = {                id: Date.now(),                name: name,                notes: '',                createdAt: new Date().toISOString()            };                        book.chapters.push(chapter);            saveData();            renderChapters();            input.value = '';            showToast('‚úÖ Chapter add ho gaya!');        }        // Render chapters        function renderChapters() {            const book = data.books.find(function(b) { return b.id === currentBookId; });            const container = document.getElementById('chaptersList');                        if (!book || !book.chapters || book.chapters.length === 0) {                container.innerHTML = `                    <div class="text-center py-12 text-purple-200">                        <div class="text-6xl mb-4">üìë</div>                        <p class="text-xl">Koi chapter nahi hai</p>                        <p>Upar se chapter add karein!</p>                    </div>                `;                return;            }                        let html = '';            book.chapters.forEach(function(chapter, index) {                html += `                    <div class="bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20 hover:bg-white/20 transition-all">                        <div class="flex items-center justify-between">                            <div class="flex-1 cursor-pointer" data-action="openNotes" data-id="${chapter.id}">                                <h3 class="text-lg font-semibold text-white">                                    <span class="text-pink-400">Chapter ${index + 1}:</span> ${escapeHtml(chapter.name)}                                </h3>                                <p class="text-purple-200 text-sm mt-1">                                    ${chapter.notes ? 'üìù Notes likhe hue hain' : '‚ö™ Abhi khali hai'}                                </p>                            </div>                            <div class="flex gap-2">                                <button data-action="openNotes" data-id="${chapter.id}" class="px-3 py-2 bg-purple-500/50 text-white rounded-lg hover:bg-purple-500/70">                                    ‚úèÔ∏è Notes                                </button>                                <button data-action="deleteChapter" data-id="${chapter.id}" class="px-3 py-2 bg-red-500/50 text-white rounded-lg hover:bg-red-500/70">                                    üóëÔ∏è                                </button>                            </div>                        </div>                    </div>                `;            });            container.innerHTML = html;        }        // Open notes        function openNotes(chapterId) {            currentChapterId = chapterId;            const book = data.books.find(function(b) { return b.id === currentBookId; });                        if (!book) return;                        const chapter = book.chapters.find(function(c) { return c.id === chapterId; });                        if (!chapter) return;                        document.getElementById('chapterView').classList.add('hidden');            document.getElementById('notesView').classList.remove('hidden');            document.getElementById('currentChapterTitle').textContent = chapter.name;            document.getElementById('notesArea').value = chapter.notes || '';        }        // Go back to chapters        function goBackToChapters() {            currentChapterId = null;            document.getElementById('notesView').classList.add('hidden');            document.getElementById('chapterView').classList.remove('hidden');        }        // Save notes        function saveNotes() {            const notes = document.getElementById('notesArea').value;            const book = data.books.find(function(b) { return b.id === currentBookId; });                        if (!book) return;                        const chapter = book.chapters.find(function(c) { return c.id === currentChapterId; });                        if (!chapter) return;                        chapter.notes = notes;            chapter.updatedAt = new Date().toISOString();            saveData();            showToast('‚úÖ Notes save ho gaye!');        }        // Insert emoji        function insertEmoji(emoji) {            const textarea = document.getElementById('notesArea');            const start = textarea.selectionStart;            const end = textarea.selectionEnd;            const text = textarea.value;            textarea.value = text.substring(0, start) + emoji + ' ' + text.substring(end);            textarea.selectionStart = textarea.selectionEnd = start + emoji.length + 1;            textarea.focus();        }        // Delete book        function deleteBook(bookId) {            if (confirm('Kya aap yeh book delete karna chahte hain? Sab chapters aur notes bhi delete ho jayenge!')) {                data.books = data.books.filter(function(b) { return b.id !== bookId; });                saveData();                renderBooks();                showToast('üóëÔ∏è Book delete ho gayi!');            }        }        // Delete chapter        function deleteChapter(chapterId) {            if (confirm('Kya aap yeh chapter delete karna chahte hain?')) {                const book = data.books.find(function(b) { return b.id === currentBookId; });                if (book) {                    book.chapters = book.chapters.filter(function(c) { return c.id !== chapterId; });                    saveData();                    renderChapters();                    showToast('üóëÔ∏è Chapter delete ho gaya!');                }            }        }        // Show toast        function showToast(message) {            const toast = document.getElementById('toast');            toast.textContent = message;            toast.classList.remove('translate-y-20', 'opacity-0');                        setTimeout(function() {                toast.classList.add('translate-y-20', 'opacity-0');            }, 2000);        }        // Event Delegation for dynamic elements        document.addEventListener('click', function(e) {            const target = e.target.closest('[data-action]');            if (!target) return;                        const action = target.getAttribute('data-action');            const id = parseInt(target.getAttribute('data-id'));                        switch(action) {                case 'openBook':                    openBook(id);                    break;                case 'deleteBook':                    deleteBook(id);                    break;                case 'openNotes':                    openNotes(id);                    break;                case 'deleteChapter':                    deleteChapter(id);                    break;            }        });        // Button event listeners        document.getElementById('addBookBtn').addEventListener('click', addBook);        document.getElementById('addChapterBtn').addEventListener('click', addChapter);        document.getElementById('backToBooks').addEventListener('click', goBack);        document.getElementById('backToChapters').addEventListener('click', goBackToChapters);        document.getElementById('saveNotesBtn').addEventListener('click', saveNotes);        // Emoji buttons        document.getElementById('emojiButtons').addEventListener('click', function(e) {            const btn = e.target.closest('[data-emoji]');            if (btn) {                insertEmoji(btn.getAttribute('data-emoji'));            }        });        // Handle Enter key        document.getElementById('bookName').addEventListener('keypress', function(e) {            if (e.key === 'Enter') addBook();        });        document.getElementById('chapterName').addEventListener('keypress', function(e) {            if (e.key === 'Enter') addChapter();        });        // Auto-save notes every 30 seconds        setInterval(function() {            if (currentChapterId) {                saveNotes();            }        }, 30000);        // Initialize when DOM is ready        if (document.readyState === 'loading') {            document.addEventListener('DOMContentLoaded', loadData);        } else {            loadData();        }    </script>
</body>

</html>
